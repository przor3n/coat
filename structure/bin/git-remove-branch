#!/bin/bash

BRANCHES=`git branch | sed 's/ //g' | sed 's/\*//g'`
BRANCHES_ARRAY=(${BRANCHES//\\n/ })
BRANCHES_NUM=${#BRANCHES_ARRAY[*]}

printf "Choose branch to remove to: \n"

for INDEX in "${!BRANCHES_ARRAY[@]}"
do
        printf  "$INDEX: %s \n" ${BRANCHES_ARRAY[$INDEX]}
done

read CHOOSE

re='^[0-9]+$'
if ! [[ $CHOOSE =~ $re ]]; then
        echo "ERROR: Not a Number" >&2; exit 1
fi

if [ $CHOOSE -lt $BRANCHES_NUM ]; then
	git branch -D ${BRANCHES_ARRAY[$CHOOSE]}
	git push origin :${BRANCHES_ARRAY[$CHOOSE]}
else
        echo "ERROR: There is no branch with that number"; exit 1
fi
